@model IEnumerable<MeherEstateDevelopers.Models.Sp_Get_Lead_Search_Comp_Result>
<div class="form-row p-10">
    <div class="col-md-1"></div>
    <div class="col-md-10">
        @foreach (var g in Model.GroupBy(x => x.AssignedToName))
        {
            <table class="table table-striped table-bordered">
                <tr>
                    <th rowspan="2" align="center">@g.Key</th>
                    <th>Initial Discussion</th>
                    <th>Token</th>
                    <th>Mature</th>
                    <th>Loose</th>
                    <th>Total</th>
                </tr>
                <tr>
                    <td>@g.Where(x => x.LeadStatus == MeherEstateDevelopers.Models.LeadsStatus.Initial_Discussion.ToString()).Count()</td>
                    <td>@g.Where(x => x.LeadStatus == MeherEstateDevelopers.Models.LeadsStatus.Token.ToString()).Count()</td>
                    <td>@g.Where(x => x.LeadStatus == MeherEstateDevelopers.Models.LeadsStatus.Mature.ToString()).Count()</td>
                    <td>@g.Where(x => x.LeadStatus == MeherEstateDevelopers.Models.LeadsStatus.Loose.ToString()).Count()</td>
                    <td>@g.Count()</td>
                </tr>
            </table>
        }

    </div>
    <div class="col-md-1"></div>
</div>
<ul class="nav nav-tabs" id="myTab" role="tablist">
    <li class="nav-item"><a class="nav-link active" role="tab" data-toggle="tab" aria-controls="home" aria-selected="true" href="#walkin">Walk-in</a></li>
    <li class="nav-item"><a class="nav-link" role="tab" data-toggle="tab" aria-controls="home" aria-selected="true" href="#uan">UAN</a></li>
    <li class="nav-item"><a class="nav-link" role="tab" data-toggle="tab" aria-controls="home" aria-selected="true" href="#sm">Social Media</a></li>
</ul>
<div class="tab-content">
    <div id="walkin" class="tab-pane active p-10">
        <table id="allleads" class="table table-striped table-bordered leads" cellspacing="0" width="100%">
            <thead class="thead-dark">
                <tr>
                    <th>Sr.</th>
                    <th>Name</th>
                    <th>Mobile</th>
                    <th>Address</th>
                    <th>Block</th>
                    <th>Lead Status</th>
                    <th>Offered Price</th>
                    <th>Assigned To</th>
                    <th>Date</th>
                </tr>
            </thead>
            <tbody>
                @{
                    if (Model.Any())
                    {
                        int srcounter = 1;
                        foreach (var item in Model.Where(x => x.Source == "Walkin"))
                        {
                            string statuscolor = "";
                            if (item.LeadStatus == MeherEstateDevelopers.Models.LeadsStatus.Mature.ToString()) { statuscolor = "bgc-green-50"; }
                            <tr class="pointer @statuscolor Plt-Lead-dets" id="@item.Id">
                                <td>@srcounter</td>
                                <td>@item.Name</td>
                                <td>@item.Mobile_1</td>
                                <td>@item.Address</td>
                                <td>@item.Block</td>
                                <td>@item.LeadStatus.Replace('_', ' ')</td>
                                <td>@string.Format("{0:n0}", item.Offered_Price)</td>
                                <td>@item.AssignedToName</td>
                                <td>@string.Format("{0:dd MMM yyyy}", item.Datetime)</td>
                            </tr>
                            srcounter++;
                        }
                    }
                }
            </tbody>
        </table>
    </div>
    <div id="uan" class="tab-pane">
        <table id="allleads" class="table table-striped table-bordered  leads" cellspacing="0" width="100%">
            <thead class="thead-dark">
                <tr>
                    <th>Sr.</th>
                    <th>Name</th>
                    <th>Mobile</th>
                    <th>Address</th>
                    <th>Block</th>
                    <th>Lead Status</th>
                    <th>Offered Price</th>
                    <th>Assigned To</th>
                    <th>Date</th>
                </tr>
            </thead>
            <tbody>
                @{
                    if (Model.Any())
                    {
                        int srcounter = 1;
                        foreach (var item in Model.Where(x => x.Source == "UAN"))
                        {
                            string statuscolor = "";
                            if (item.LeadStatus == MeherEstateDevelopers.Models.LeadsStatus.Mature.ToString()) { statuscolor = "bgc-green-50"; }
                            <tr class="pointer @statuscolor Plt-Lead-dets" id="@item.Id">
                                <td>@srcounter</td>
                                <td>@item.Name</td>
                                <td>@item.Mobile_1</td>
                                <td>@item.Address</td>
                                <td>@item.Block</td>
                                <td>@item.LeadStatus.Replace('_', ' ')</td>
                                <td>@string.Format("{0:n0}", item.Offered_Price)</td>
                                <td>@item.AssignedToName</td>
                                <td>@string.Format("{0:dd MMM yyyy}", item.Datetime)</td>
                            </tr>
                            srcounter++;
                        }
                    }
                }
            </tbody>
        </table>
    </div>
    <div id="sm" class="tab-pane">
        <table id="allleads" class="table table-striped table-bordered leads" cellspacing="0" width="100%">
            <thead class="thead-dark">
                <tr>
                    <th>Sr.</th>
                    <th>Name</th>
                    <th>Mobile</th>
                    <th>Address</th>
                    <th>Block</th>
                    <th>Lead Status</th>
                    <th>Offered Price</th>
                    <th>Assigned To</th>
                    <th>Date</th>
                </tr>
            </thead>
            <tbody>
                @{
                    if (Model.Any())
                    {
                        int srcounter = 1;
                        foreach (var item in Model.Where(x => x.Source == "Social Media"))
                        {
                            string statuscolor = "";
                            if (item.LeadStatus == MeherEstateDevelopers.Models.LeadsStatus.Mature.ToString()) { statuscolor = "bgc-green-50"; }
                            <tr class="pointer @statuscolor Plt-Lead-dets" id="@item.Id">
                                <td>@srcounter</td>
                                <td>@item.Name</td>
                                <td>@item.Mobile_1</td>
                                <td>@item.Address</td>
                                <td>@item.Block</td>
                                <td>@item.LeadStatus.Replace('_', ' ')</td>
                                <td>@string.Format("{0:n0}", item.Offered_Price)</td>
                                <td>@item.AssignedToName</td>
                                <td>@string.Format("{0:dd MMM yyyy}", item.Datetime)</td>
                            </tr>
                            srcounter++;
                        }
                    }
                }
            </tbody>
        </table>
    </div>
</div>
<script>
    $(document).ready(function () {
        $('.leads').DataTable();
    });
</script>


